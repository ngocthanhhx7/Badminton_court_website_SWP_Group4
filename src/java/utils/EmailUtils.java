//package utils;
//
//import jakarta.mail.*;
//import jakarta.mail.internet.*;
//import java.util.Properties;
//
//public class EmailUtils {
//
//    public static void sendEmail(String recipientEmail, String verifyCode) throws MessagingException {
//        // Th√¥ng tin c·∫•u h√¨nh SMTP server (v√≠ d·ª• Gmail)
//        String host = "smtp.gmail.com";
//        String port = "587";
//        final String senderEmail = "buivanthong10052004@gmail.com";   
//        final String senderPassword = "xjfo eorw wjbu nwbb";     
//
//        Properties props = new Properties();
//        props.put("mail.smtp.auth", "true");
//        props.put("mail.smtp.starttls.enable", "true");
//        props.put("mail.smtp.host", host);
//        props.put("mail.smtp.port", port);
//
//        // T·∫°o session x√°c th·ª±c
//        Session session = Session.getInstance(props, new Authenticator() {
//            protected PasswordAuthentication getPasswordAuthentication() {
//                return new PasswordAuthentication(senderEmail, senderPassword);
//            }
//        });
//
//        // T·∫°o message
//        Message message = new MimeMessage(session);
//        message.setFrom(new InternetAddress(senderEmail));
//        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipientEmail));
//        message.setSubject("M√£ x√°c minh email c·ªßa b·∫°n");
//        message.setText("Ch√†o b·∫°n,\n\nM√£ x√°c minh c·ªßa b·∫°n l√†: " + verifyCode + "\n\nC·∫£m ∆°n b·∫°n ƒë√£ ƒëƒÉng k√Ω!");
//
//        // G·ª≠i mail
//        Transport.send(message);
//    }
//}

package utils;

import jakarta.mail.*;
import jakarta.mail.internet.*;
import java.util.Properties;

public class EmailUtils {

    // Th√¥ng tin t√†i kho·∫£n g·ª≠i email
    private static final String SENDER_EMAIL = "buivanthong10052004@gmail.com";
    private static final String SENDER_PASSWORD = "xjfo eorw wjbu nwbb"; // App password Gmail

    // G·ª≠i m√£ x√°c minh t√†i kho·∫£n
    public static void sendVerificationEmail(String recipientEmail, String verifyCode) throws MessagingException {
        String subject = "M√£ x√°c minh email c·ªßa b·∫°n";
        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px;'>"
                + "<p>Ch√†o b·∫°n,</p>"
                + "<p>M√£ x√°c minh t√†i kho·∫£n c·ªßa b·∫°n l√†: <b style='color:blue'>" + verifyCode + "</b></p>"
                + "<p>Vui l√≤ng nh·∫≠p m√£ n√†y ƒë·ªÉ ho√†n t·∫•t ƒëƒÉng k√Ω t√†i kho·∫£n.</p>"
                + "<p>Tr√¢n tr·ªçng,<br>H·ªá th·ªëng BadmintonHub</p>"
                + "</body></html>";
        sendEmail(recipientEmail, subject, htmlContent);
    }

    // G·ª≠i m√£ x√°c minh ƒë·ªÉ ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u
    public static void sendPasswordResetVerificationEmail(String recipientEmail, String verifyCode) throws MessagingException {
        String subject = "M√£ x√°c minh ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u - BadmintonHub";
        String currentTime = java.time.LocalDateTime.now()
                .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm dd/MM/yyyy"));

        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px; color:#333;'>"
                + "<div style='max-width:600px; margin:0 auto; padding:20px; border:1px solid #ddd; border-radius:8px;'>"
                + "<div style='text-align:center; background-color:#007bff; color:white; padding:20px; border-radius:8px 8px 0 0; margin:-20px -20px 20px -20px;'>"
                + "<h1 style='margin:0; font-size:24px;'>üè∏ BadmintonHub</h1>"
                + "<h2 style='margin:10px 0 0 0; font-size:18px; font-weight:normal;'>ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u</h2>"
                + "</div>"
                
                + "<p>Xin ch√†o,</p>"
                + "<p>B·∫°n v·ª´a y√™u c·∫ßu ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u cho t√†i kho·∫£n BadmintonHub.</p>"
                
                + "<div style='background-color:#f8f9fa; padding:20px; border-radius:8px; margin:20px 0; text-align:center;'>"
                + "<h3 style='color:#007bff; margin-top:0;'>üîê M√£ x√°c minh c·ªßa b·∫°n:</h3>"
                + "<div style='background-color:white; border:2px solid #007bff; border-radius:8px; padding:15px; margin:10px 0;'>"
                + "<span style='font-size:32px; font-weight:bold; color:#007bff; letter-spacing:3px;'>" + verifyCode + "</span>"
                + "</div>"
                + "<p style='color:#6c757d; margin:10px 0 0 0; font-size:12px;'>M√£ n√†y c√≥ hi·ªáu l·ª±c trong <b>10 ph√∫t</b></p>"
                + "</div>"
                
                + "<div style='background-color:#fff3cd; border:1px solid #ffc107; border-radius:8px; padding:15px; margin:20px 0;'>"
                + "<h4 style='color:#856404; margin-top:0;'>‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng:</h4>"
                + "<ul style='margin:0; padding-left:20px; color:#856404;'>"
                + "<li>M√£ x√°c minh n√†y ch·ªâ c√≥ hi·ªáu l·ª±c trong <b>10 ph√∫t</b></li>"
                + "<li>Kh√¥ng chia s·∫ª m√£ n√†y v·ªõi b·∫•t k·ª≥ ai</li>"
                + "<li>N·∫øu b·∫°n kh√¥ng y√™u c·∫ßu ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u, vui l√≤ng b·ªè qua email n√†y</li>"
                + "</ul>"
                + "</div>"
                
                + "<div style='text-align:center; margin:30px 0;'>"
                + "<p style='margin:10px 0;'>üìû <b>Hotline:</b> 0123-456-789</p>"
                + "<p style='margin:10px 0;'>üìß <b>Email:</b> support@badmintonhub.com</p>"
                + "</div>"
                
                + "<div style='border-top:1px solid #dee2e6; padding-top:20px; margin-top:30px; text-align:center; color:#6c757d; font-size:12px;'>"
                + "<p>Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông v√†o l√∫c " + currentTime + "</p>"
                + "<p>Tr√¢n tr·ªçng,<br><b style='color:#007bff;'>ƒê·ªôi ng≈© BadmintonHub</b></p>"
                + "</div>"
                + "</div>"
                + "</body></html>";
        sendEmail(recipientEmail, subject, htmlContent);
    }

    // G·ª≠i email x√°c nh·∫≠n thay ƒë·ªïi m·∫≠t kh·∫©u
    public static void sendPasswordChangedEmail(String recipientEmail, String newPassword) throws MessagingException {
        String subject = "X√°c nh·∫≠n thay ƒë·ªïi m·∫≠t kh·∫©u";
        String currentTime = java.time.LocalDateTime.now()
                .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm dd/MM/yyyy"));

        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px;'>"
                + "<p>Xin ch√†o,</p>"
                + "<p>B·∫°n v·ª´a thay ƒë·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng v√†o l√∫c <b>" + currentTime + "</b>.</p>"
                + "<p><b>M·∫≠t kh·∫©u m·ªõi c·ªßa b·∫°n l√†:</b> <span style='color:blue'>" + newPassword + "</span></p>"
                + "<p>N·∫øu b·∫°n kh√¥ng th·ª±c hi·ªán vi·ªác n√†y, vui l√≤ng li√™n h·ªá v·ªõi qu·∫£n tr·ªã vi√™n ngay.</p>"
                + "<p>Tr√¢n tr·ªçng,<br>H·ªá th·ªëng BadmintonHub</p>"
                + "</body></html>";
        sendEmail(recipientEmail, subject, htmlContent);
    }

    // G·ª≠i email th√¥ng b√°o ƒë·∫∑t s√¢n th√†nh c√¥ng
    public static void sendBookingConfirmationEmail(String recipientEmail, String customerName, 
            String bookingId, String courtName, String courtType, String startTime, 
            String endTime, String amount, String paymentMethod) throws MessagingException {
        String subject = "X√°c nh·∫≠n ƒë·∫∑t s√¢n th√†nh c√¥ng - BadmintonHub";
        String currentTime = java.time.LocalDateTime.now()
                .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm dd/MM/yyyy"));

        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px; color:#333;'>"
                + "<div style='max-width:600px; margin:0 auto; padding:20px; border:1px solid #ddd; border-radius:8px;'>"
                + "<div style='text-align:center; background-color:#007bff; color:white; padding:20px; border-radius:8px 8px 0 0; margin:-20px -20px 20px -20px;'>"
                + "<h1 style='margin:0; font-size:24px;'>üè∏ BadmintonHub</h1>"
                + "<h2 style='margin:10px 0 0 0; font-size:18px; font-weight:normal;'>X√°c nh·∫≠n ƒë·∫∑t s√¢n th√†nh c√¥ng</h2>"
                + "</div>"
                
                + "<p>Xin ch√†o <b style='color:#007bff;'>" + customerName + "</b>,</p>"
                + "<p>C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t s√¢n t·∫°i BadmintonHub! Thanh to√°n c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω th√†nh c√¥ng.</p>"
                
                + "<div style='background-color:#f8f9fa; padding:20px; border-radius:8px; margin:20px 0;'>"
                + "<h3 style='color:#007bff; margin-top:0;'>üìã Th√¥ng tin ƒë·∫∑t s√¢n:</h3>"
                + "<table style='width:100%; border-collapse:collapse;'>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>M√£ ƒë·∫∑t s√¢n:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6; color:#007bff; font-weight:bold;'>#" + bookingId + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>S√¢n:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + courtName + " (" + courtType + ")</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Th·ªùi gian:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + startTime + " - " + endTime + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Ph∆∞∆°ng th·ª©c thanh to√°n:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + paymentMethod + "</td></tr>"
                + "<tr><td style='padding:8px 0;'><b>S·ªë ti·ªÅn ƒë√£ thanh to√°n:</b></td><td style='padding:8px 0; color:#28a745; font-weight:bold; font-size:16px;'>" + amount + " VNƒê</td></tr>"
                + "</table>"
                + "</div>"
                
                + "<div style='background-color:#e8f5e8; border:1px solid #28a745; border-radius:8px; padding:15px; margin:20px 0;'>"
                + "<p style='margin:0; color:#28a745;'><b>‚úÖ Tr·∫°ng th√°i:</b> ƒê√£ x√°c nh·∫≠n v√† thanh to√°n th√†nh c√¥ng</p>"
                + "</div>"
                
                + "<h3 style='color:#007bff;'>üìù L∆∞u √Ω quan tr·ªçng:</h3>"
                + "<ul style='line-height:1.6;'>"
                + "<li>Vui l√≤ng c√≥ m·∫∑t <b>15 ph√∫t tr∆∞·ªõc</b> gi·ªù ƒë·∫∑t s√¢n</li>"
                + "<li>Mang theo gi√†y th·ªÉ thao ph√π h·ª£p</li>"
                + "<li>Li√™n h·ªá v·ªõi ch√∫ng t√¥i n·∫øu c·∫ßn h·ªó tr·ª£ th√™m</li>"
                + "<li>C√≥ th·ªÉ h·ªßy s√¢n tr∆∞·ªõc <b>2 ti·∫øng</b> ƒë·ªÉ ƒë∆∞·ª£c ho√†n ti·ªÅn</li>"
                + "</ul>"
                
                + "<div style='text-align:center; margin:30px 0;'>"
                + "<p style='margin:10px 0;'>üìû <b>Hotline:</b> 0123-456-789</p>"
                + "<p style='margin:10px 0;'>üìß <b>Email:</b> support@badmintonhub.com</p>"
                + "<p style='margin:10px 0;'>üåê <b>Website:</b> www.badmintonhub.com</p>"
                + "</div>"
                
                + "<div style='border-top:1px solid #dee2e6; padding-top:20px; margin-top:30px; text-align:center; color:#6c757d; font-size:12px;'>"
                + "<p>Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông v√†o l√∫c " + currentTime + "</p>"
                + "<p>Tr√¢n tr·ªçng,<br><b style='color:#007bff;'>ƒê·ªôi ng≈© BadmintonHub</b></p>"
                + "</div>"
                + "</div>"
                + "</body></html>";
        sendEmail(recipientEmail, subject, htmlContent);
    }

    // G·ª≠i email th√¥ng b√°o h·ªßy ƒë·∫∑t s√¢n
    public static void sendBookingCancellationEmail(String recipientEmail, String customerName, 
            String bookingId, java.util.List<String> courtDetails) throws MessagingException {
        String subject = "X√°c nh·∫≠n h·ªßy ƒë·∫∑t s√¢n - BadmintonHub";
        String currentTime = java.time.LocalDateTime.now()
                .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm dd/MM/yyyy"));

        StringBuilder courtInfo = new StringBuilder();
        for (String courtDetail : courtDetails) {
            courtInfo.append(courtDetail);
        }

        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px; color:#333;'>"
                + "<div style='max-width:600px; margin:0 auto; padding:20px; border:1px solid #ddd; border-radius:8px;'>"
                + "<div style='text-align:center; background-color:#dc3545; color:white; padding:20px; border-radius:8px 8px 0 0; margin:-20px -20px 20px -20px;'>"
                + "<h1 style='margin:0; font-size:24px;'>üè∏ BadmintonHub</h1>"
                + "<h2 style='margin:10px 0 0 0; font-size:18px; font-weight:normal;'>X√°c nh·∫≠n h·ªßy ƒë·∫∑t s√¢n</h2>"
                + "</div>"
                
                + "<p>Xin ch√†o <b style='color:#007bff;'>" + customerName + "</b>,</p>"
                + "<p>Y√™u c·∫ßu h·ªßy ƒë·∫∑t s√¢n c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω th√†nh c√¥ng.</p>"
                
                + "<div style='background-color:#f8f9fa; padding:20px; border-radius:8px; margin:20px 0;'>"
                + "<h3 style='color:#dc3545; margin-top:0;'>üìã Th√¥ng tin ƒë·∫∑t s√¢n ƒë√£ h·ªßy:</h3>"
                + "<table style='width:100%; border-collapse:collapse;'>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>M√£ ƒë·∫∑t s√¢n:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6; color:#dc3545; font-weight:bold;'>#" + bookingId + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Th·ªùi gian h·ªßy:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + currentTime + "</td></tr>"
                + "</table>"
                
                + "<h4 style='color:#dc3545; margin-top:20px; margin-bottom:10px;'>Chi ti·∫øt s√¢n ƒë√£ h·ªßy:</h4>"
                + "<table style='width:100%; border-collapse:collapse; border:1px solid #dee2e6;'>"
                + "<tr style='background-color:#f8f9fa;'>"
                + "<th style='padding:8px; text-align:left; border-bottom:1px solid #dee2e6;'>T√™n s√¢n</th>"
                + "<th style='padding:8px; text-align:left; border-bottom:1px solid #dee2e6;'>Lo·∫°i s√¢n</th>"
                + "<th style='padding:8px; text-align:left; border-bottom:1px solid #dee2e6;'>Th·ªùi gian</th>"
                + "</tr>"
                + courtInfo.toString()
                + "</table>"
                + "</div>"
                
                + "<div style='background-color:#ffe6e6; border:1px solid #dc3545; border-radius:8px; padding:15px; margin:20px 0;'>"
                + "<p style='margin:0; color:#dc3545;'><b>‚ùå Tr·∫°ng th√°i:</b> ƒê√£ h·ªßy th√†nh c√¥ng</p>"
                + "</div>"
                
                + "<h3 style='color:#dc3545;'>üìù Ch√≠nh s√°ch ho√†n ti·ªÅn:</h3>"
                + "<ul style='line-height:1.6;'>"
                + "<li>Ho√†n ti·ªÅn s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω trong v√≤ng <b>3-5 ng√†y l√†m vi·ªác</b></li>"
                + "<li>S·ªë ti·ªÅn s·∫Ω ƒë∆∞·ª£c ho√†n v·ªÅ t√†i kho·∫£n thanh to√°n ban ƒë·∫ßu</li>"
                + "<li>Li√™n h·ªá hotline n·∫øu c√≥ th·∫Øc m·∫Øc v·ªÅ vi·ªác ho√†n ti·ªÅn</li>"
                + "</ul>"
                
                + "<div style='text-align:center; margin:30px 0;'>"
                + "<p style='margin:10px 0;'>üìû <b>Hotline:</b> 0123-456-789</p>"
                + "<p style='margin:10px 0;'>üìß <b>Email:</b> support@badmintonhub.com</p>"
                + "<p style='margin:10px 0;'>üåê <b>Website:</b> www.badmintonhub.com</p>"
                + "</div>"
                
                + "<div style='border-top:1px solid #dee2e6; padding-top:20px; margin-top:30px; text-align:center; color:#6c757d; font-size:12px;'>"
                + "<p>Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông v√†o l√∫c " + currentTime + "</p>"
                + "<p>C·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng d·ªãch v·ª• BadmintonHub!</p>"
                + "<p>Tr√¢n tr·ªçng,<br><b style='color:#007bff;'>ƒê·ªôi ng≈© BadmintonHub</b></p>"
                + "</div>"
                + "</div>"
                + "</body></html>";
        sendEmail(recipientEmail, subject, htmlContent);
    }

    // G·ª≠i email h·ªßy ƒë·∫∑t s√¢n ƒë∆°n gi·∫£n (kh√¥ng c√≥ chi ti·∫øt s√¢n)
    public static void sendSimpleCancellationEmail(String recipientEmail, String customerName, 
            String bookingId) throws MessagingException {
        
        String subject = "X√°c nh·∫≠n h·ªßy ƒë·∫∑t s√¢n - BadmintonHub";
        String currentTime = java.time.LocalDateTime.now()
                .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm dd/MM/yyyy"));

        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px; color:#333;'>"
                + "<div style='max-width:600px; margin:0 auto; padding:20px; border:1px solid #ddd; border-radius:8px;'>"
                + "<div style='text-align:center; background-color:#dc3545; color:white; padding:20px; border-radius:8px 8px 0 0; margin:-20px -20px 20px -20px;'>"
                + "<h1 style='margin:0; font-size:24px;'>üè∏ BadmintonHub</h1>"
                + "<h2 style='margin:10px 0 0 0; font-size:18px; font-weight:normal;'>X√°c nh·∫≠n h·ªßy ƒë·∫∑t s√¢n</h2>"
                + "</div>"
                
                + "<p>Xin ch√†o <b style='color:#007bff;'>" + customerName + "</b>,</p>"
                + "<p>Y√™u c·∫ßu h·ªßy ƒë·∫∑t s√¢n c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω th√†nh c√¥ng.</p>"
                
                + "<div style='background-color:#f8f9fa; padding:20px; border-radius:8px; margin:20px 0;'>"
                + "<h3 style='color:#dc3545; margin-top:0;'>üìã Th√¥ng tin ƒë·∫∑t s√¢n ƒë√£ h·ªßy:</h3>"
                + "<table style='width:100%; border-collapse:collapse;'>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>M√£ ƒë·∫∑t s√¢n:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6; color:#dc3545; font-weight:bold;'>#" + bookingId + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Th·ªùi gian h·ªßy:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + currentTime + "</td></tr>"
                + "</table>"
                + "</div>"
                
                + "<div style='background-color:#ffe6e6; border:1px solid #dc3545; border-radius:8px; padding:15px; margin:20px 0;'>"
                + "<p style='margin:0; color:#dc3545;'><b>‚ùå Tr·∫°ng th√°i:</b> ƒê√£ h·ªßy th√†nh c√¥ng</p>"
                + "</div>"
                
                + "<h3 style='color:#dc3545;'>üìù Ch√≠nh s√°ch ho√†n ti·ªÅn:</h3>"
                + "<ul style='line-height:1.6;'>"
                + "<li>Ho√†n ti·ªÅn s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω trong v√≤ng <b>3-5 ng√†y l√†m vi·ªác</b></li>"
                + "<li>S·ªë ti·ªÅn s·∫Ω ƒë∆∞·ª£c ho√†n v·ªÅ t√†i kho·∫£n thanh to√°n ban ƒë·∫ßu</li>"
                + "<li>Li√™n h·ªá hotline n·∫øu c√≥ th·∫Øc m·∫Øc v·ªÅ vi·ªác ho√†n ti·ªÅn</li>"
                + "</ul>"
                
                + "<div style='text-align:center; margin:30px 0;'>"
                + "<p style='margin:10px 0;'>üìû <b>Hotline:</b> 0123-456-789</p>"
                + "<p style='margin:10px 0;'>üìß <b>Email:</b> support@badmintonhub.com</p>"
                + "<p style='margin:10px 0;'>üåê <b>Website:</b> www.badmintonhub.com</p>"
                + "</div>"
                
                + "<div style='border-top:1px solid #dee2e6; padding-top:20px; margin-top:30px; text-align:center; color:#6c757d; font-size:12px;'>"
                + "<p>Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông v√†o l√∫c " + currentTime + "</p>"
                + "<p>C·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng d·ªãch v·ª• BadmintonHub!</p>"
                + "<p>Tr√¢n tr·ªçng,<br><b style='color:#007bff;'>ƒê·ªôi ng≈© BadmintonHub</b></p>"
                + "</div>"
                + "</div>"
                + "</body></html>";
        
        System.out.println("HTML content length: " + htmlContent.length());
        System.out.println("Calling sendEmail method...");
        sendEmail(recipientEmail, subject, htmlContent);
        System.out.println("sendEmail method completed successfully");
        System.out.println("=== SIMPLE CANCELLATION EMAIL SENT ===");
    }

    // G·ª≠i email th√¥ng b√°o ƒë·∫∑t s√¢n b·ªüi Staff cho Customer
    public static void sendStaffBookingConfirmationEmail(String recipientEmail, String customerName, 
            String bookingId, String courtInfo, String dateInfo, String timeInfo) throws MessagingException {
        String subject = "X√°c nh·∫≠n ƒë·∫∑t s√¢n th√†nh c√¥ng - BadmintonHub";
        String currentTime = java.time.LocalDateTime.now()
                .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm dd/MM/yyyy"));

        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px; color:#333;'>"
                + "<div style='max-width:600px; margin:0 auto; padding:20px; border:1px solid #ddd; border-radius:8px;'>"
                + "<div style='text-align:center; background-color:#007bff; color:white; padding:20px; border-radius:8px 8px 0 0; margin:-20px -20px 20px -20px;'>"
                + "<h1 style='margin:0; font-size:24px;'>üè∏ BadmintonHub</h1>"
                + "<h2 style='margin:10px 0 0 0; font-size:18px; font-weight:normal;'>X√°c nh·∫≠n ƒë·∫∑t s√¢n th√†nh c√¥ng</h2>"
                + "</div>"
                
                + "<p>Xin ch√†o <b style='color:#007bff;'>" + customerName + "</b>,</p>"
                + "<p>Nh√¢n vi√™n c·ªßa ch√∫ng t√¥i ƒë√£ ƒë·∫∑t s√¢n d√πm b·∫°n. Vui l√≤ng ki·ªÉm tra th√¥ng tin ƒë·∫∑t s√¢n d∆∞·ªõi ƒë√¢y:</p>"
                
                + "<div style='background-color:#f8f9fa; padding:20px; border-radius:8px; margin:20px 0;'>"
                + "<h3 style='color:#007bff; margin-top:0;'>üìã Th√¥ng tin ƒë·∫∑t s√¢n:</h3>"
                + "<table style='width:100%; border-collapse:collapse;'>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>M√£ ƒë·∫∑t s√¢n:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6; color:#007bff; font-weight:bold;'>#" + bookingId + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>S√¢n:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + courtInfo + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Ng√†y:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + dateInfo + "</td></tr>"
                + "<tr><td style='padding:8px 0;'><b>Th·ªùi gian:</b></td><td style='padding:8px 0; color:#28a745; font-weight:bold;'>" + timeInfo + "</td></tr>"
                + "</table>"
                + "</div>"
                
                + "<div style='background-color:#e8f5e8; border:1px solid #28a745; border-radius:8px; padding:15px; margin:20px 0;'>"
                + "<p style='margin:0; color:#28a745;'><b>‚úÖ Tr·∫°ng th√°i:</b> ƒê√£ x√°c nh·∫≠n - ƒê·∫∑t b·ªüi nh√¢n vi√™n</p>"
                + "</div>"
                
                + "<h3 style='color:#007bff;'>üìù L∆∞u √Ω quan tr·ªçng:</h3>"
                + "<ul style='line-height:1.6;'>"
                + "<li>Vui l√≤ng c√≥ m·∫∑t <b>15 ph√∫t tr∆∞·ªõc</b> gi·ªù ƒë·∫∑t s√¢n</li>"
                + "<li>Mang theo gi√†y th·ªÉ thao ph√π h·ª£p</li>"
                + "<li>Thanh to√°n c√≥ th·ªÉ th·ª±c hi·ªán t·∫°i qu·∫ßy l·ªÖ t√¢n</li>"
                + "<li>Li√™n h·ªá v·ªõi ch√∫ng t√¥i n·∫øu c·∫ßn thay ƒë·ªïi ho·∫∑c h·ªßy s√¢n</li>"
                + "</ul>"
                
                + "<div style='text-align:center; margin:30px 0;'>"
                + "<p style='margin:10px 0;'>üìû <b>Hotline:</b> 0123-456-789</p>"
                + "<p style='margin:10px 0;'>üìß <b>Email:</b> support@badmintonhub.com</p>"
                + "<p style='margin:10px 0;'>üåê <b>Website:</b> www.badmintonhub.com</p>"
                + "</div>"
                
                + "<div style='border-top:1px solid #dee2e6; padding-top:20px; margin-top:30px; text-align:center; color:#6c757d; font-size:12px;'>"
                + "<p>Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông v√†o l√∫c " + currentTime + "</p>"
                + "<p>Tr√¢n tr·ªçng,<br><b style='color:#007bff;'>ƒê·ªôi ng≈© BadmintonHub</b></p>"
                + "</div>"
                + "</div>"
                + "</body></html>";
        
        sendEmail(recipientEmail, subject, htmlContent);
        System.out.println("=== STAFF BOOKING CONFIRMATION EMAIL SENT ===");
    }

    // G·ª≠i email th√¥ng b√°o cho Staff v·ªÅ booking m·ªõi
    public static void sendNewBookingNotificationToStaff(String staffEmail, String customerName, 
            String bookingId, String courtName, String courtType, String startTime, 
            String endTime, String amount) throws MessagingException {
        String subject = "[STAFF NOTIFICATION] New Booking - BadmintonHub";
        String currentTime = java.time.LocalDateTime.now()
                .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm dd/MM/yyyy"));

        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px; color:#333;'>"
                + "<div style='max-width:600px; margin:0 auto; padding:20px; border:1px solid #ddd; border-radius:8px;'>"
                + "<div style='text-align:center; background-color:#28a745; color:white; padding:20px; border-radius:8px 8px 0 0; margin:-20px -20px 20px -20px;'>"
                + "<h1 style='margin:0; font-size:24px;'>üè∏ BadmintonHub - Staff Portal</h1>"
                + "<h2 style='margin:10px 0 0 0; font-size:18px; font-weight:normal;'>New Booking Alert</h2>"
                + "</div>"
                
                + "<p><b>üÜï NEW BOOKING RECEIVED</b></p>"
                + "<p>A new booking has been created and requires your attention.</p>"
                
                + "<div style='background-color:#f8f9fa; padding:20px; border-radius:8px; margin:20px 0;'>"
                + "<h3 style='color:#28a745; margin-top:0;'>üìã Booking Details:</h3>"
                + "<table style='width:100%; border-collapse:collapse;'>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Booking ID:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6; color:#28a745; font-weight:bold;'>#" + bookingId + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Customer:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + customerName + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Court:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + courtName + " (" + courtType + ")</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Time:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + startTime + " - " + endTime + "</td></tr>"
                + "<tr><td style='padding:8px 0;'><b>Amount:</b></td><td style='padding:8px 0; color:#28a745; font-weight:bold; font-size:16px;'>" + amount + " VNƒê</td></tr>"
                + "</table>"
                + "</div>"
                
                + "<div style='background-color:#e8f5e8; border:1px solid #28a745; border-radius:8px; padding:15px; margin:20px 0;'>"
                + "<p style='margin:0; color:#28a745;'><b>‚úÖ Status:</b> New booking created at " + currentTime + "</p>"
                + "</div>"
                
                + "<h3 style='color:#28a745;'>üìù Staff Actions Required:</h3>"
                + "<ul style='line-height:1.6;'>"
                + "<li>Review booking details and confirm availability</li>"
                + "<li>Prepare court and equipment if needed</li>"
                + "<li>Contact customer if any issues arise</li>"
                + "<li>Update booking status in the system</li>"
                + "</ul>"
                
                + "<div style='text-align:center; margin:30px 0;'>"
                + "<a href='http://localhost:8080/SWP_Project/booking?action=my-bookings&customerId=" + bookingId + "' "
                + "style='background-color:#28a745; color:white; padding:12px 24px; text-decoration:none; border-radius:6px; font-weight:bold;'>"
                + "üì± View Booking Details</a>"
                + "</div>"
                
                + "<div style='border-top:1px solid #dee2e6; padding-top:20px; margin-top:30px; text-align:center; color:#6c757d; font-size:12px;'>"
                + "<p>This is an automated staff notification sent at " + currentTime + "</p>"
                + "<p><b style='color:#28a745;'>BadmintonHub Staff System</b></p>"
                + "</div>"
                + "</div>"
                + "</body></html>";
        sendEmail(staffEmail, subject, htmlContent);
    }

    // G·ª≠i email th√¥ng b√°o cho Staff v·ªÅ booking b·ªã h·ªßy
    public static void sendCancelBookingNotificationToStaff(String staffEmail, String customerName, 
            String bookingId) throws MessagingException {
        String subject = "[STAFF NOTIFICATION] Booking Cancelled - BadmintonHub";
        String currentTime = java.time.LocalDateTime.now()
                .format(java.time.format.DateTimeFormatter.ofPattern("HH:mm dd/MM/yyyy"));

        String htmlContent = "<html><body style='font-family:Arial,sans-serif;font-size:14px; color:#333;'>"
                + "<div style='max-width:600px; margin:0 auto; padding:20px; border:1px solid #ddd; border-radius:8px;'>"
                + "<div style='text-align:center; background-color:#dc3545; color:white; padding:20px; border-radius:8px 8px 0 0; margin:-20px -20px 20px -20px;'>"
                + "<h1 style='margin:0; font-size:24px;'>üè∏ BadmintonHub - Staff Portal</h1>"
                + "<h2 style='margin:10px 0 0 0; font-size:18px; font-weight:normal;'>Booking Cancellation Alert</h2>"
                + "</div>"
                
                + "<p><b>‚ùå BOOKING CANCELLED</b></p>"
                + "<p>A booking has been cancelled and requires your attention.</p>"
                
                + "<div style='background-color:#f8f9fa; padding:20px; border-radius:8px; margin:20px 0;'>"
                + "<h3 style='color:#dc3545; margin-top:0;'>üìã Cancelled Booking Details:</h3>"
                + "<table style='width:100%; border-collapse:collapse;'>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Booking ID:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6; color:#dc3545; font-weight:bold;'>#" + bookingId + "</td></tr>"
                + "<tr><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'><b>Customer:</b></td><td style='padding:8px 0; border-bottom:1px solid #dee2e6;'>" + customerName + "</td></tr>"
                + "<tr><td style='padding:8px 0;'><b>Cancelled At:</b></td><td style='padding:8px 0; color:#dc3545; font-weight:bold;'>" + currentTime + "</td></tr>"
                + "</table>"
                + "</div>"
                
                + "<div style='background-color:#ffe6e6; border:1px solid #dc3545; border-radius:8px; padding:15px; margin:20px 0;'>"
                + "<p style='margin:0; color:#dc3545;'><b>‚ùå Status:</b> Booking cancelled and court slot released</p>"
                + "</div>"
                + 
                "<h3 style='color:#dc3545;'>üìù Staff Actions Required:</h3>"
                + "<ul style='line-height:1.6;'>"
                + "<li>Confirm court slot is now available for other bookings</li>"
                + "<li>Process refund if applicable</li>"
                + "<li>Update court schedule and availability</li>"
                + "<li>Clean and prepare court for next booking</li>"
                + "</ul>"
                
                + "<div style='border-top:1px solid #dee2e6; padding-top:20px; margin-top:30px; text-align:center; color:#6c757d; font-size:12px;'>"
                + "<p>This is an automated staff notification sent at " + currentTime + "</p>"
                + "<p><b style='color:#dc3545;'>BadmintonHub Staff System</b></p>"
                + "</div>"
                + "</div>"
                + "</body></html>";
        sendEmail(staffEmail, subject, htmlContent);
    }

    // H√†m g·ª≠i email public ƒë·ªÉ s·ª≠ d·ª•ng t·ª´ b√™n ngo√†i
    public static void sendEmail(String recipientEmail, String subject, String htmlContent) throws MessagingException {
        String host = "smtp.gmail.com";
        String port = "587";

        Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.host", host);
        props.put("mail.smtp.port", port);

        Session session = Session.getInstance(props, new Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(SENDER_EMAIL, SENDER_PASSWORD);
            }
        });

        MimeMessage message = new MimeMessage(session);
        message.setFrom(new InternetAddress(SENDER_EMAIL));
        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipientEmail));
        message.setSubject(subject, "UTF-8");
        message.setContent(htmlContent, "text/html; charset=UTF-8");

        Transport.send(message);
    }
}